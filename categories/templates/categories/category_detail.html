{% extends "base.html" %}

{% block title %}{{ category.name }} Â· marketPlace{% endblock %}

{% block content %}
<div class="card">
  <h1>{{ category.name }}</h1>
  {% if category.image %}
    <img src="{{ category.image.url }}" alt="{{ category.name }}" style="width:100%;max-height:300px;object-fit:cover;border-radius:8px;">
  {% endif %}
  <p>{{ category.description }}</p>
  <div style="display:flex;gap:8px;flex-wrap:wrap;">
    <a class="btn" href="{% url 'categories:category_update' category.pk %}">Edit</a>
    <a class="btn" href="{% url 'categories:category_delete' category.pk %}">Delete</a>
    <a class="btn" href="{% url 'categories:category_list' %}">Back</a>
  </div>
</div>

<div class="card" style="margin-top:16px;">
  <h2>Products in {{ category.name }}</h2>
  {% if products %}
    <div class="grid">
      {% for product in products %}
        <div class="card">
          {% if product.image %}
            <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width:100%;max-height:160px;object-fit:cover;border-radius:8px 8px 0 0;">
          {% endif %}
          <h3>{{ product.name }}</h3>
          <p class="muted">{{ product.description|truncatechars:80 }}</p>
          <a class="btn" href="{% url 'products:product_detail' product.pk %}">View</a>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No products in this category yet.</p>
  {% endif %}
</div>
{% endblock %}


